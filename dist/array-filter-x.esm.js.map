{"version":3,"sources":["../src/array-filter-x.js"],"names":[],"mappings":"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","file":"array-filter-x.esm.js","sourcesContent":["import attempt from 'attempt-x';\nimport splitIfBoxedBug from 'split-if-boxed-bug-x';\nimport toLength from 'to-length-x';\nimport toObject from 'to-object-x';\nimport assertIsFunction from 'assert-is-function-x';\n\n/** @type {ArrayConstructor} */\nconst ArrayCtr = [].constructor;\n/** @type {ObjectConstructor} */\nconst castObject = {}.constructor;\n/** @type {BooleanConstructor} */\nconst castBoolean = true.constructor;\nconst nativFilter = typeof ArrayCtr.prototype.filter === 'function' && ArrayCtr.prototype.filter;\n\nlet isWorking;\n\nif (nativFilter) {\n  let spy = 0;\n  let res = attempt.call([1, 2], nativFilter, (item) => {\n    spy += item;\n\n    return false;\n  });\n\n  isWorking = res.threw === false && res.value && res.value.length === 0 && spy === 3;\n\n  if (isWorking) {\n    spy = '';\n    res = attempt.call(castObject('abc'), nativFilter, (item, index) => {\n      spy += item;\n\n      return index === 1;\n    });\n\n    isWorking = res.threw === false && res.value && res.value.length === 1 && res.value[0] === 'b' && spy === 'abc';\n  }\n\n  if (isWorking) {\n    spy = 0;\n    res = attempt.call(\n      (function getArgs() {\n        /* eslint-disable-next-line prefer-rest-params */\n        return arguments;\n      })(1, 2, 3),\n      nativFilter,\n      (item, index) => {\n        spy += item;\n\n        return index === 2;\n      },\n    );\n\n    isWorking = res.threw === false && res.value && res.value.length === 1 && res.value[0] === 3 && spy === 6;\n  }\n\n  if (isWorking) {\n    spy = 0;\n    res = attempt.call(\n      {\n        0: 1,\n        1: 2,\n        3: 3,\n        4: 4,\n        length: 4,\n      },\n      nativFilter,\n      (item) => {\n        spy += item;\n\n        return false;\n      },\n    );\n\n    isWorking = res.threw === false && res.value && res.value.length === 0 && spy === 6;\n  }\n\n  if (isWorking) {\n    const doc = typeof document !== 'undefined' && document;\n\n    if (doc) {\n      spy = null;\n      const fragment = doc.createDocumentFragment();\n      const div = doc.createElement('div');\n      fragment.appendChild(div);\n      res = attempt.call(fragment.childNodes, nativFilter, (item) => {\n        spy = item;\n\n        return item;\n      });\n\n      isWorking = res.threw === false && res.value && res.value.length === 1 && res.value[0] === div && spy === div;\n    }\n  }\n\n  if (isWorking) {\n    const isStrict = (function returnIsStrict() {\n      /* eslint-disable-next-line babel/no-invalid-this */\n      return castBoolean(this) === false;\n    })();\n\n    if (isStrict) {\n      spy = null;\n      res = attempt.call(\n        [1],\n        nativFilter,\n        () => {\n          /* eslint-disable-next-line babel/no-invalid-this */\n          spy = typeof this === 'string';\n        },\n        'x',\n      );\n\n      isWorking = res.threw === false && res.value && res.value.length === 0 && spy === true;\n    }\n  }\n\n  if (isWorking) {\n    spy = {};\n    const fn = [\n      'return nativFilter.call(\"foo\", function (_, __, context) {',\n      'if (castBoolean(context) === false || typeof context !== \"object\") {',\n      'spy.value = true;}});',\n    ].join('');\n\n    /* eslint-disable-next-line no-new-func */\n    res = attempt(Function('nativFilter', 'spy', 'castBoolean', fn), nativFilter, spy);\n\n    isWorking = res.threw === false && res.value && res.value.length === 0 && spy.value !== true;\n  }\n}\n\n/**\n * This method creates a new array with all elements that pass the test\n * implemented by the provided function.\n *\n * @param {Array} array - The array to iterate over.\n * @param {Function} callBack - Function is a predicate, to test each element.\n * @param {*} [thisArg] - Value to use as this when executing callback.\n * @throws {TypeError} If array is null or undefined.\n * @throws {TypeError} If callBack is not a function.\n * @returns {Array} A new array with the elements that pass the test.\n */\nlet $filter;\n\nif (nativFilter) {\n  $filter = function filter(array, callBack /* , thisArg */) {\n    const args = [callBack];\n\n    if (arguments.length > 2) {\n      /* eslint-disable-next-line prefer-rest-params,prefer-destructuring */\n      args[1] = arguments[2];\n    }\n\n    return nativFilter.apply(array, args);\n  };\n} else {\n  $filter = function filter(array, callBack /* , thisArg */) {\n    const object = toObject(array);\n    // If no callback function or if callback is not a callable function\n    assertIsFunction(callBack);\n    const iterable = splitIfBoxedBug(object);\n    const length = toLength(iterable.length);\n    let thisArg;\n\n    if (arguments.length > 2) {\n      /* eslint-disable-next-line prefer-rest-params,prefer-destructuring */\n      thisArg = arguments[2];\n    }\n\n    const noThis = typeof thisArg === 'undefined';\n    const result = [];\n    for (let i = 0; i < length; i += 1) {\n      if (i in iterable) {\n        const item = iterable[i];\n\n        if (noThis ? callBack(item, i, object) : callBack.call(thisArg, item, i, object)) {\n          result[result.length] = item;\n        }\n      }\n    }\n\n    return result;\n  };\n}\n\nconst arrayFilter = $filter;\n\nexport default arrayFilter;\n"]}